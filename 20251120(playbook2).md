

## SSH

dnf -y install epel-release<br/>
dnf -y install ansible<br/>

#### Server A

vi /etc/ansible/hosts<br/>
[servers]<br/>
192.168.111.200<br/>
192.168.111.130<br/>

ssh-keygen<br/>
ssh-copy-id root@192.168.111.200<br/>
ssh-copy-id root@192.168.111.130<br/>

ansible all -m ping<br/>
ansible all -m shell -a timedatectl<br/>

vi time.yaml<br/>

<img width="366" height="122" alt="image" src="https://github.com/user-attachments/assets/f04c2556-4632-44d5-86b2-4fae23582d87" />

alias ap=ansible-playbook<br/>
ap time.yaml --syntax-check<br/>
ap time.yaml --list-hosts<br/>
<br/>

#### Server A - NFS 서버 , Server B,C - NFS 클라이언트

#### Server A

vi nfs.yaml

---<br/>
- name: nfs server<br/>
  hosts: localhost<br/>
<br/>
  tasks:<br/>
<br/>
  - name: install nfs-utils<br/>
    yum:<br/>
      name: nfs-utils<br/>
      state: latest<br/>
<br/>
  - name: make directory<br/>
    file:<br/>
      path: /nfsserver<br/>
      state: directory<br/>
      mode: 0777<br/>
<br/>
  - name: /etc/exports<br/>
    lineinfile:<br/>
      path: /etc/exports<br/>
      line: /nfsserver 192.168.111.0/24(rw,sync,no_root_squash)<br/>
<br/>
  - name: start nfs service<br/>
    service:<br/>
      name: nfs-server<br/>
      state: started<br/>
      enabled: yes<br/>
<br/>
  - name: open firewall, nfs<br/>
    firewalld:<br/>
      service: nfs<br/>
      permanent: yes<br/>
      immediate: yes<br/>
      state: enabled<br/>
<br/>
  - name: open firewall, mountd<br/>
    firewalld:<br/>
      service: mountd<br/>
      permanent: yes<br/>
      immediate: yes<br/>
      state: enabled<br/>
<br/>
  - name: open firewall, rpcbind<br/>
    firewalld:<br/>
      service: rpc-bind<br/>
      permanent: yes<br/>
      immediate: yes<br/>
      state: enabled<br/>
<br/>
- name: nfs client<br/>
  hosts: servers<br/>
<br/>
  tasks:<br/>
<br/>
  - name: install nfs-utils<br/>
    yum:<br/>
      name: nfs-utils<br/>
      state: latest<br/>
<br/>
  - name: make directory<br/>
    file:<br/>
      path: /nfsclient<br/>
      state: directory<br/>
<br/>
  - name: mount nfs server directory<br/>
    mount:<br/>
      path: /nfsclient<br/>
      src: 192.168.111.144:/nfsserver<br/>
      fstype: nfs<br/>
      state: mounted<br/>
<br/>


#### Server B

df 로 확인


































































































































































































































































































































