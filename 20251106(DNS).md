<img width="311" height="260" alt="image" src="https://github.com/user-attachments/assets/622ce7bd-a8bc-4709-995d-19080e5d2d06" />## SMTP

dnf install -yq sendmail<br/>
<br/>
systemctl -now enable sendmail<br/>
firewall-cmd --add-service=smtp<br/>
<br/>
dnf install -yq s-nail<br/>
<br/>
s-nail user1<br/>
Subject:Hello<br/>
To:user1<br/>
mail test<br/>
bye<br/>

-Ctrl+d를 누르면 메일 전송할 것인지 확인한다. yes를 입력하면 메일이 전송된다

s-nail user1 user3 user4로 나열하면 여러명에게 보낼수 있다<br/>
s-nail user < mail.txt로 미리 작성해논 mail.txt 파일의 내용이 user1 사용자에게 전송된다.<br/>


### Server A - 메일 서버1 Server B - 메일 서버 2 Server C - DNS 서버

#### Server C 

dnf -yq install bind<br/>
systemctl --now enable named<br/>
firewall-cmd --add-service=dns<br/>

naver.com<br/>
github.com<br/>
2개의 dns으로 중계를 해야합니다 (위에 예시)<br/>

vi /etc/named.conf

<img width="561" height="214" alt="image" src="https://github.com/user-attachments/assets/df011453-615d-4329-86ef-cc8a67f66363" />


vi /etc/named.rfc1912.zones<br/>
(가장 아래쪽으로 이동)<br/>
<br/>

<img width="309" height="135" alt="image" src="https://github.com/user-attachments/assets/d1f73c5c-54eb-4f06-910b-fba39a8e2d2e" />

맨 위에서 esc 모드에서 5yy를 누르면 복사가 되는데 붙여넣고싶은 위치로 이동해서 p enter 하면 붙여넣기가 됩니다.

<img width="320" height="243" alt="image" src="https://github.com/user-attachments/assets/af6fa8ba-c2e9-4775-a6d9-134d1a7690f8" />

<img width="311" height="260" alt="image" src="https://github.com/user-attachments/assets/f89cc591-d9f1-4128-a384-41ae22f51aac" />

cd /var/named<br/>
tail /etc/named.rfc1912.zones (써놓은 문장 다시 확인하기)<br/>

cp -p named.empty github.com.zone<br/>
cp -p named.empty naver.com.zone<br/>

naver.com.zone 혹은 github.com.zone -> 포워딩 존 파일이라고 부릅니다<br/>

리버스 존 파일<br/>
DNS의 정방향 주소 -> IP<br/>
DNS의 역방향 IP -> 주소<br/>

메일 서버 -> DNS 서버<br/>
역방향 DNS가 필요<br/>

<img width="303" height="114" alt="image" src="https://github.com/user-attachments/assets/fcd9fee5-2812-4ed0-87a9-6ac01bef5d0c" />

(원래는 100.111.168.192 로 해야하겠지만 100부분을 없이 작성도 가능하며 file이름도 바꿀수 있습니다)

file 이름이 mydns.rev가 없기에 /var/named에 만들러갑니다 

cp -p named.empty mydns.rev<br/>
vi mydns.rev<br/>

<img width="503" height="304" alt="image" src="https://github.com/user-attachments/assets/aafa794f-df2c-401a-acd6-61752fccc893" />

vi naver.com.zone

<img width="504" height="261" alt="image" src="https://github.com/user-attachments/assets/a8422c1b-316c-4da2-aedf-b2f05b56e2d9" />

vi github.com.zone

<img width="508" height="267" alt="image" src="https://github.com/user-attachments/assets/12cf8d30-f98b-4aa8-9700-7888270d2540" />

systemctl restart named (여기서 안되면 오타 있는것)

nslookup
>server 192.168.111.144
>server 192.168.111.200
>192.168.111.144
>192.168.111.200


