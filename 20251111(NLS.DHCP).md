## 인증 서버 (로그인 서버)

### NLS 서버

*썬 마이크로 시스템즈

rpcbind 패키지를 필요

#### Server B - NLS 서버 , Server B2 - NLS 클라이언트

A,B 서버에 특정 호스트 이름을 부여

#### Server B,B2

vi /etc/hosts

>192.168.111.200  nis.4gl.io<br/>
>192.168.111.201  nis_client.4gl.io<br/>

*dnf -y install ypserv (Rocky linux 8버전까지만 가능)

#### Server B

nisdomainname 4gl.io

vi /etc/sysconfig/network<br/>
>NISDOMAIN=4gl.io<br/>

useradd testuser<br/>
passwd testuser<br/>

systemctl --now enable rpcbind ypserv yppasswdd ypxfrd nis-domainname<br/>
cd /var/yp<br/>
make<br/>
systemctl restart rpcbind ypserv yppasswdd ypxfrd nis-domainname<br/>

vi /etc/sysconfig/network<br/>
>YPSERV_ARGS="-p 944"<br/>
>YPXFRD_ARGS="-p 945"<br/>

vi /etc/sysconfig/yppasswdd<br/>
>YPPASSWDD_ARGS= "--port 950"<br/>

firewall-cmd --add-service=rpc-bind<br/>
firewall-cmd --add-port=944-950/tcp<br/>
firewall-cmd --add-port=944-950/udp<br/>
firewall-cmd --runtime-to-permanent<br/>

#### Server B2

dnf -y install ypbind yp-tools oddjob-mkhomedir<br/>
nisdomainname 4gl.io<br/>
<br/>

vi /etc/sysconfig/network<br/>
>NISDOMAIN=4gl.io<br/>

vi /etc/yp.conf

<img width="558" height="298" alt="image" src="https://github.com/user-attachments/assets/65d876c2-82fd-485b-9a70-f111a838f99f" />

<img width="544" height="310" alt="image" src="https://github.com/user-attachments/assets/f4197173-378a-4f64-9ed2-8eb0370b877d" />


systemctl --now enable rpcbind ypbind nis-domainname oddjobd<br/>

authselect select nis --force<br/>
authselect enable-feature with-mkhomedir<br/>

systemctl restart rpcbind ypbind nis-domainname oddjobd

ssh testuser@localhost (본인에게 접속해서 테스트)

#### Server B에서 변경시 make 해줘야함

### DHCP 서버

*D.O.R.A - 탐색 -> 제안 -> 요청 -> 확인 <br/>
사용하는 이유 : IP 입력 시 실수를 없앰 , IP 중복 방지 , 실제 서브넷 갯수 이상의 IP 할당 가능<br/>

DHCP 임대 기간  - 유동 인구가 많은곳 - 임대 기간 짧게<br/>
               - 유동 인구 적은 곳(집, 회사) - 임대 기간 길게<br/>
임대 기간 임박시 IP - Renewal , Rebinding<br/>
*Renewal(50%) - 통신 가능한 상태에서 응답 성공 시 - 사용 가능, 임대 기간 갱신<br/>
*Rebinding - 서버 전체 브로드캐스팅 주소에 응답 요청 사용 가능(응답시) -> 임대 기간 갱신[미응답시 IP 주소 만료 후 반납]<br/>

#### Server A

dnf install -y dhcp-server

vi /etc/dhcp/dhcpd.conf

*샘플 vi /usr/share/doc/dhcp-server/dhcpd.conf.example<br/>
:47<br/>
<img width="528" height="157" alt="image" src="https://github.com/user-attachments/assets/e4808e87-30ed-4dc1-a082-712d8fcdc8b6" />

방금 복사한 부분을 vi /etc/dhcp/dhcpd.conf에 옮기기
*작업 전 VM에서 DHCP 끄기

<img width="396" height="137" alt="image" src="https://github.com/user-attachments/assets/f153d291-5ded-409e-ba87-443172f763b5" />

systemctl restart dhcpd

*ip 고정 해제
nmcli con mod ens160 ipv4.addr "192.168.111.100/24" ipv4.dns "192.168.111.2" ipv4.gateway "192.168.111.2" ipv4.method manual connection.autoconnect yes<br/>
nmcli con down ens160<br/>
nmcli con up ens160<br/>

#### Server B

주소 확인 하기

#### Server A 

/var/lib/dhcpd/dhcpd.leases<br/>
IP 할당 후 로그 확인<br/>

































