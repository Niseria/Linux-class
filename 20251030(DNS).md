## DNS

#### /etc/resolv.conf <- 해당 사이트안에 nameserver IP

* 재귀 DNS - 보유하고 있는 정보가 있을 겅유 회신 , 보유한 정보가 없을 경우 다른 DNS 서버로 질의
* 캐싱 전용 DNS - 보유한 DNS 정보가 없으므로 모든 쿼리를 외부에서 처리(배달 및 보관)
* 마스터 DNS - 보유한 DNS 정보가 있으므로 요청된 쿼리에 한해 본인이 쿼리를 처리(없을경우 외부에 질의)

/etc/resolv.conf <br/>
유동적<br/>
<br/>
nmcli con mod ens33 ipv4.dns<br/>
고정적<br/>
<br/>
dnf -y install bind bind-utils<br/>
*dnf도 dns에서 받아오는거기에 ping google.com로 확인하기<br/>
*nslookup -> bind-utils 에 포함<br/>
<br/>
rpm -qa | grep bind (확인)

외부 혹은 필요한 대역에서 접속할 수 있도록 설정 변경<br/>
vi /etc/named.conf<br/>

*설치 - bind / 제어 - named

<img width="365" height="61" alt="image" src="https://github.com/user-attachments/assets/35d5019d-dadd-4121-a18d-6e914c9ea926" />

listen-on port 53 { none; };- 접근 불허<br/>
listen-on port 53 { any; };  - 모두 가능 완전 개방<br/>

<img width="333" height="64" alt="image" src="https://github.com/user-attachments/assets/ba823953-7da0-4b3e-967a-56a6736cf559" />

ipv6는 사용 안할 예정

directory /var/named<br/>
<br/>
웹 서버의 경우 - /etc/httpd/conf/httpd.conf<br/>
                /var/www/html<br/>


<img width="290" height="31" alt="image" src="https://github.com/user-attachments/assets/1dbe2716-e94d-4d57-83cf-d9c86596a275" />

다른 서버가 들어올 수 있게 any로 바꿔주기

<img width="229" height="26" alt="image" src="https://github.com/user-attachments/assets/7af491eb-7984-4dfa-baa7-13822fc894ce" />

:wq<br/>
systemctl restart named<br/>
systemctl enable named<br/>

### server B

vi /etc/resolv.conf

<img width="294" height="55" alt="image" src="https://github.com/user-attachments/assets/9b6ac863-8384-460d-9102-137515e98880" />

server A 주소 ip만 넣기<br/>
:wq<br/>

<img width="368" height="30" alt="image" src="https://github.com/user-attachments/assets/efef0056-40fc-4077-91f8-dd306aaf544e" />
연결이 안된다.<br/>

### server A

firewall-cmd --add-service=dns<br/>
--add-port=53/udp<br/>
(DNS는 기본적으로 UDP 포트를 사용 / tcp 대비 오버헤드가 적음)<br/>
(DNS 주 서버 -> 보조 서버가 있을땐 tcp 사용 가능)<br/>

### server B

<img width="741" height="148" alt="image" src="https://github.com/user-attachments/assets/0a485983-ecd0-4b6c-b02f-8888b16eb789" />
받아오는거라 확실히 느리다<br/>

nslookup<br/>
(네임 서버를 통해 IP 찾기)<br/>

<img width="276" height="27" alt="image" src="https://github.com/user-attachments/assets/98a12841-cf43-464a-8388-37da84a9f33a" />

아

dnf install -y bind-utils<br/>
nslookup<br/>

>server
<img width="269" height="39" alt="image" src="https://github.com/user-attachments/assets/fcd1e203-de02-42bf-926b-11eea8a46e87" />

>www.google.com
<img width="294" height="133" alt="image" src="https://github.com/user-attachments/assets/f5873bfb-2fe9-49ef-8ea1-87301b56d003" />




