## 리눅스 부팅

### init의 런레벨

0 - 시스템 종료 | 시스템 종료<br/>
6 - 재시작 | 재시작<br/>

#### 3 - 다중 사용자 모드(NFS 포함) [유닉스] | 다중 사용자 모드 [로키 리눅스]

init -> systemd [슈퍼 데몬]


### systemd 기본 개념

소켓 - inetd와 호환성을 유지한다

#### systemd 유닛의 종류

service - 시스템 서비스 유닛으로 데몬을 시작 - 종료 - 재시작 - 로드 한다.<br/>
socket - 소켓을 관리하는 유닛으로 AF_INET,AF_INET6, AF_UNIX소켓 스트림과 데이터그램, FIFO를 지원한다<br/>
target - 유닛을 그루핑한다. (시스템 상태(런레벨)) <br/>
*데몬 - 백그라운드에서 구동되는 서버용 서비스 프로그램<br/>

### systemd 관련 명령

systemctl [옵션] [명령] [유닛명]<br/>
<br/>
-a 상태와 관계없이 유닛 전체를 출력한다.<br/>
-t 유닛 종류 : 지정한 종류의 유닛만 출력한다.<br/>
<br/>
systemctl is-active [유닛명] : 유닛이 동작하고 있는지 확인한다.<br/>

#### 현재 target과 런레벨 확인하기

systemctl get-default - target 확인<br/>
runlevel - 런레벨 확인<br/>

당연한 말이지만 런레벨 0이나 런레벨 6에 해당하는 target을 기본으로 지정하면 안된다.

#### *재부팅할때 e 눌러서 정보 바꿀때 비밀번호 입력하게 만들기 (리눅스 8버전)

vi /etc/grub.d/00_header<br/>
cat << EOF<br/>
set superusers="mylinux"<br/>
password mylinux 1234(비밀번호)

<br/>
EOF<br/>
<br/>
적용<br/>
grub2-mkconfig -o /boot/grub2/grub.cfg<br/>
<br/>



## Quota

lsblk<br/>
fdisk /dev/sdb<br/>
...<br/>
mkfs.ext4 /dev/sdb1<br/>
mkdir /home2<br/>
mount /dev/sdb1 /home2<br/>
useradd -d /home2/quota1 quota1<br/>
useradd -d /home2/quota2 quota2<br/>
<br/>
vi /etc/fstab<br/>
/dev/sdb1  /home2  ext4  defaults,usrjquota=aquota.user,grpjquota=aquota.grp,jqfmt=vfsv0  1  1<br/>
<br/>
systemctl daemon-reload<br/>
mount -o remount /home2<br/>
<br/>
*mount로 확인<br/>
<br/>
cd /home2<br/>
quotacheck -augmn (데이터베이스 생성)<br/>
quotaon -u quota1(쿼터 실행)<br/>
<br/>
edquota -u quota1<br/>
...<br/>
edquota -p quota1 quota2 (quota1의 정보를 quota2에 복사)<br/>
<br/>
<br/>
edquota -g quota1 (속해있는 그룹의 쿼터 설정)<br/>

<img width="735" height="71" alt="Image" src="https://github.com/user-attachments/assets/e472feaa-c16e-4888-87a4-0195d9568d58" />
<br/>*너무 작으면 안되니까 적당히

*root 사용자는 quota 명령어로 다른 유저 쿼터 설정을 확인할 수 있음
<img width="696" height="155" alt="Image" src="https://github.com/user-attachments/assets/3a260408-c8cb-4cb4-9b4c-761b98266680" />

repquota /home2

<img width="585" height="193" alt="Image" src="https://github.com/user-attachments/assets/bdcdda3a-6bd0-44cd-a21c-8d7f57f4291a" />

*만약 오류났을때 수정<br/>
<br/>
blkid | grep /dev/sdb1<br/>
blkid | grep /dev/sdb1 >> /etc/fstab<br/>

<img width="967" height="293" alt="Image" src="https://github.com/user-attachments/assets/971c76c3-49cf-4867-9521-78eac7ec99e4" />

#만 앞에 붙이고 저장<br/>
blkid로 어느 파일인지 확인후 /etc/fstab에서 수정.<br/>
<br/>

### ext4가 아닌 xfs로 포멧후 진행

mkfs.xfs /dev/sdc1<br/>
mkdir /home3<br/>
mount /dev/sdc1 /home3<br/>
<br/>
blkid로 sdc1 UUID 복사<br/>
UUID="b5de77b3-971e-4c18-86f0-01d5e94263a7"<br/>
<br/>
vi /etc/fstab<br/>
UUID=b5de77b3-971e-4c18-86f0-01d5e94263a7  /home3  xfs  defaults,uquota,gquota  0  0<br/>
<br/>

reboot하고 mount로 확인해보기

<img width="1246" height="559" alt="Image" src="https://github.com/user-attachments/assets/d4e577e4-8951-43dd-b2bb-f1957bb3626c" />

useradd -d /home3/quota3 quota3


/home3에 대한 xfs 쿼터 설정<br/>
xfs_quota -x /home3<br/>
<br/>
state 로 전체 상태 확인<br/>
report -h로 쿼터 현황 확인<br/>
limit bsoft=1G bhard=2G quota3로 쿼터 설정<br/>
<br/>
나가기 quit<br/>










